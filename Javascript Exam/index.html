<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Task Manager</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f4f6f9;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
    }
    .badge-high { background-color: #dc3545; }
    .badge-medium { background-color: #ffc107; }
    .badge-low { background-color: #198754; }
  </style>
</head>

<body>
  <div class="container py-5">
    <h2 class="text-center mb-4">ðŸ“‹ Task Manager</h2>

    <div class="row g-4">
     
      <div class="col-md-4">
        <div class="card p-4">
          <form onsubmit="formSubmit(event)">
            <input type="hidden" id="editId">
            <div class="mb-3">
              <label class="form-label">Task</label>
              <input type="text" class="form-control" id="task" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Date</label>
              <input type="date" class="form-control" id="date" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Priority</label>
              <select id="priority" class="form-select">
                <option value="High">High</option>
                <option value="Medium" selected>Medium</option>
                <option value="Low">Low</option>
              </select>
            </div>
            <button class="btn btn-primary w-100" type="submit" id="submitBtn">Add Task</button>
          </form>
        </div>
      </div>

     
      <div class="col-md-8">
        <div class="card p-4">
          <div class="d-flex justify-content-between mb-3">
            <h5 class="mb-0">All Tasks</h5>
            <select id="filterPriority" class="form-select w-auto" onchange="filterTasks()">
              <option value="All">All Priorities</option>
              <option value="High">High</option>
              <option value="Medium">Medium</option>
              <option value="Low">Low</option>
            </select>
          </div>
          <div class="table-responsive">
            <table class="table table-bordered text-center align-middle">
              <thead class="table-light">
                <tr>
                  <th>ID</th>
                  <th>Task</th>
                  <th>Date</th>
                  <th>Priority</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="taskList"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    function formSubmit(e) {
      e.preventDefault();
      const task = document.getElementById("task").value;
      const date = document.getElementById("date").value;
      const priority = document.getElementById("priority").value;
      const editId = document.getElementById("editId").value;

      if (editId) {
        tasks = tasks.map(t =>
          t.id === parseInt(editId) ? { ...t, task, date, priority } : t
        );
        document.getElementById("submitBtn").innerText = "Add Task";
      } else {
        const id = tasks.length > 0 ? tasks[tasks.length - 1].id + 1 : 1;
        tasks.push({ id, task, date, priority });
      }

      localStorage.setItem("tasks", JSON.stringify(tasks));
      clearForm();
      displayTasks();
    }

    function displayTasks(filtered = "All") {
      const taskList = document.getElementById("taskList");
      taskList.innerHTML = "";

      const filteredTasks = filtered === "All" ? tasks : tasks.filter(t => t.priority === filtered);

      filteredTasks.forEach(t => {
        let badgeClass = "";
        if (t.priority === "High") badgeClass = "badge-high";
        if (t.priority === "Medium") badgeClass = "badge-medium";
        if (t.priority === "Low") badgeClass = "badge-low";

        const row = `
          <tr>
            <td>${t.id}</td>
            <td>${t.task}</td>
            <td>${t.date}</td>
            <td><span class="badge text-white ${badgeClass}">${t.priority}</span></td>
            <td>
              <button class="btn btn-sm btn-warning" onclick="editTask(${t.id})">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteTask(${t.id})">Delete</button>
            </td>
          </tr>`;
        taskList.innerHTML += row;
      });
    }

    function clearForm() {
      document.getElementById("task").value = "";
      document.getElementById("date").value = "";
      document.getElementById("priority").value = "Medium";
      document.getElementById("editId").value = "";
      document.getElementById("submitBtn").innerText = "Add Task";
    }

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      localStorage.setItem("tasks", JSON.stringify(tasks));
      displayTasks(document.getElementById("filterPriority").value);
    }

    function editTask(id) {
      const task = tasks.find(t => t.id === id);
      document.getElementById("task").value = task.task;
      document.getElementById("date").value = task.date;
      document.getElementById("priority").value = task.priority;
      document.getElementById("editId").value = task.id;
      document.getElementById("submitBtn").innerText = "Update Task";
    }

    function filterTasks() {
      const selected = document.getElementById("filterPriority").value;
      displayTasks(selected);
    }

    displayTasks();
  </script>
</body>
</html>
